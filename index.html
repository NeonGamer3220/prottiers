<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NoobTiers</title>

  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:Segoe UI, sans-serif;}
    body{
      background:
        radial-gradient(circle at 18% 60%, rgba(123,92,255,.35), transparent 55%),
        radial-gradient(circle at 82% 35%, rgba(0,229,255,.25), transparent 55%),
        #0b1220;
      color:#eaf2ff;
    }

    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:22px 36px;
    }
    .logo{
      font-size:26px;
      font-weight:800;
      letter-spacing:.2px;
      background:linear-gradient(45deg,#7b5cff,#00e5ff);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      user-select:none;
    }

    .filter-bar{
      display:flex;
      gap:10px;
      padding:10px 36px 22px 36px;
      flex-wrap:wrap;
    }
    .filter-btn{
      padding:9px 14px;
      border-radius:999px;
      border:1px solid rgba(80,105,150,.45);
      background:rgba(14,24,42,.55);
      color:#9ec9ff;
      cursor:pointer;
      transition:.18s;
      backdrop-filter: blur(10px);
    }
    .filter-btn:hover{ transform:translateY(-2px); background:rgba(20,35,62,.65); }
    .filter-btn.active{
      background:linear-gradient(135deg, rgba(0,229,255,.95), rgba(123,92,255,.95));
      color:#07111f;
      border-color:transparent;
      box-shadow:0 10px 30px rgba(0,229,255,.18);
    }

    .container{
      width:min(1200px, 94vw);
      margin: 0 auto 40px auto;
      padding: 0 6px;
    }

    .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:22px 22px;
      margin-bottom:14px;
      border-radius:18px;
      background: linear-gradient(90deg, rgba(12,20,37,.78), rgba(10,18,34,.62));
      border:1px solid rgba(60,85,130,.35);
      box-shadow:
        0 10px 30px rgba(0,0,0,.25),
        inset 0 1px 0 rgba(255,255,255,.05);
      backdrop-filter: blur(10px);
      transition:.2s;
    }
    .row:hover{ transform:translateY(-3px); border-color:rgba(110,155,220,.35); }

    /* TOP 3 glow */
    .row.gold{
      box-shadow:
        0 12px 38px rgba(0,0,0,.28),
        0 0 38px rgba(255,215,0,.18),
        inset 0 1px 0 rgba(255,255,255,.06);
      border-color: rgba(255,215,0,.25);
    }
    .row.silver{
      box-shadow:
        0 12px 38px rgba(0,0,0,.28),
        0 0 38px rgba(200,200,200,.16),
        inset 0 1px 0 rgba(255,255,255,.06);
      border-color: rgba(210,210,210,.22);
    }
    .row.bronze{
      box-shadow:
        0 12px 38px rgba(0,0,0,.28),
        0 0 38px rgba(205,127,50,.16),
        inset 0 1px 0 rgba(255,255,255,.06);
      border-color: rgba(205,127,50,.22);
    }

    .left{
      display:flex;
      align-items:center;
      gap:18px;
      min-width: 520px;
    }
    .rank{
      width:40px;
      font-size:24px;
      font-weight:900;
      color:#eaf2ff;
      opacity:.95;
      text-align:left;
    }
    .skin{
      width:74px;
      height:auto;
      border-radius:14px;
      background:rgba(255,255,255,.03);
      border:1px solid rgba(255,255,255,.06);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
    }
    .name{
      font-size:20px;
      font-weight:800;
      margin-bottom:8px;
    }

    .tiers{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }
    .tier-pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:7px 10px;
      border-radius:999px;
      font-size:12.5px;
      font-weight:800;
      letter-spacing:.2px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.04);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
      white-space:nowrap;
    }
    .tier-pill img{
      width:16px; height:16px;
      image-rendering: pixelated;
      opacity:.95;
    }

    .points{
      font-size:22px;
      font-weight:900;
      color:#00e5ff;
      padding-left:16px;
      white-space:nowrap;
    }

    /* Tier colors (HT/LT) */
    .t-HT1{ background:rgba(0,229,255,.18); border-color:rgba(0,229,255,.35); }
    .t-LT1{ background:rgba(123,92,255,.18); border-color:rgba(123,92,255,.35); }

    .t-HT2{ background:rgba(0,255,170,.16); border-color:rgba(0,255,170,.32); }
    .t-LT2{ background:rgba(255,220,100,.16); border-color:rgba(255,220,100,.32); }

    .t-HT3{ background:rgba(255,110,210,.16); border-color:rgba(255,110,210,.32); }
    .t-LT3{ background:rgba(255,160,70,.16); border-color:rgba(255,160,70,.32); }

    .t-HT4{ background:rgba(120,160,255,.16); border-color:rgba(120,160,255,.32); }
    .t-LT4{ background:rgba(200,200,200,.14); border-color:rgba(200,200,200,.28); }

    .t-HT5{ background:rgba(180,110,255,.16); border-color:rgba(180,110,255,.32); }
    .t-LT5{ background:rgba(150,170,200,.12); border-color:rgba(150,170,200,.22); }

    @media (max-width: 820px){
      .left{ min-width:auto; }
      .row{ flex-direction:column; align-items:flex-start; gap:14px; }
      .points{ align-self:flex-end; }
    }
  </style>
</head>

<body>
  <header>
    <div class="logo">NoobTiers</div>
  </header>

  <div class="filter-bar" id="filters">
    <button class="filter-btn active" data-mode="all">Ã–sszes</button>
    <button class="filter-btn" data-mode="Vanilla">Vanilla</button>
    <button class="filter-btn" data-mode="Mace">Mace</button>
    <button class="filter-btn" data-mode="Sword">Sword</button>
    <button class="filter-btn" data-mode="DiaSMP">DiaSMP</button>
    <button class="filter-btn" data-mode="Creeper">Creeper</button>
  </div>

  <div class="container" id="leaderboard"></div>

  <script>
    const tierPoints = {
      "LT5":1,"HT5":2,
      "LT4":3,"HT4":4,
      "LT3":5,"HT3":6,
      "LT2":7,"HT2":8,
      "LT1":9,"HT1":10
    };

    // gamemode icon path (te: assets/modes/*.png)
    const modeIcons = {
      Vanilla: "assets/modes/vanilla.png",
      UHC: "assets/modes/uhc.png",
      Pot: "assets/modes/pot.png",
      NethPot: "assets/modes/nethpot.png",
      SMP: "assets/modes/smp.png",
      Sword: "assets/modes/sword.png",
      Axe: "assets/modes/axe.png",
      Mace: "assets/modes/mace.png",
      Cart: "assets/modes/cart.png",
      Creeper: "assets/modes/creeper.png",
      DiaSMP: "assets/modes/diasmp.png",
      "OG Vanilla": "assets/modes/ogvanilla.png",
      "Shieldless UHC": "assets/modes/shieldlessuhc.png"
    };

    // ---- CORE: store tiers per player as an OBJECT (mode -> tier) so it can only exist once.
    // if it "changes", we overwrite.
    const players = new Map();

    function upsertTier(playerName, mode, tier){
      if(!players.has(playerName)){
        players.set(playerName, { name: playerName, tiersByMode: {} });
      }
      players.get(playerName).tiersByMode[mode] = tier; // overwrite = no duplicates
    }

    // ---- BASE data (your earlier stuff) - you can keep extending these with upsertTier lines
    upsertTier("Krisionyt","Mace","HT4");
    upsertTier("Krisionyt","Sword","LT4");
    upsertTier("NeonGamer322","Mace","LT3");
    upsertTier("NeonGamer322","Sword","HT4");
    upsertTier("Matheus_Adelee","Vanilla","LT3");
    upsertTier("Matheus_Adelee","Mace","HT5");
    upsertTier("OwandYTOwnsMe","Mace","LT3");
    upsertTier("OwandYTOwnsMe","Creeper","LT3");
    upsertTier("KevinREAL","Mace","LT4");

    // ---- DIA SMP results (ONLY ONE DiaSMP per player; overwrite safe)
    const diaSMPResults = [
      ["DariusREALL","LT2"],
      ["NeonGamer322","HT3"],
      ["KevinREAL","LT3"],
      ["Krisionyt","LT3"],
      ["Matheus_Adelee","HT4"],
      ["Krazy_Attached","HT4"],
      ["GronyX4","HT4"],
      ["Sanyeszkusz","LT4"],
      ["Nyxen2311","HT5"]
    ];
    diaSMPResults.forEach(([name,tier]) => upsertTier(name,"DiaSMP",tier));

    let currentFilter = "all";

    // filter button events
    document.querySelectorAll(".filter-btn").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        document.querySelectorAll(".filter-btn").forEach(b=>b.classList.remove("active"));
        btn.classList.add("active");
        currentFilter = btn.dataset.mode;
        render();
      });
    });

    function calcPoints(tiersByMode, filterMode){
      const entries = Object.entries(tiersByMode); // [mode, tier][]
      const used = (filterMode === "all")
        ? entries
        : entries.filter(([m]) => m === filterMode);

      const points = used.reduce((sum, [,t]) => sum + (tierPoints[t] || 0), 0);
      return { used, points };
    }

    function tierClass(t){
      return "t-" + t; // matches .t-HT1 etc
    }

    function render(){
      const board = document.getElementById("leaderboard");
      board.innerHTML = "";

      const list = Array.from(players.values())
        .map(p=>{
          const { used, points } = calcPoints(p.tiersByMode, currentFilter);
          return { ...p, used, points };
        })
        .filter(p => p.points > 0)
        .sort((a,b)=> b.points - a.points);

      list.forEach((p, i)=>{
        const row = document.createElement("div");
        row.className = "row";

        if(i===0) row.classList.add("gold");
        if(i===1) row.classList.add("silver");
        if(i===2) row.classList.add("bronze");

        const pills = p.used.map(([mode, tier])=>{
          const icon = modeIcons[mode] || "";
          return `
            <span class="tier-pill ${tierClass(tier)}" title="${mode} ${tier}">
              ${icon ? `<img src="${icon}" alt="${mode}">` : ``}
              <span>${mode} ${tier}</span>
            </span>
          `;
        }).join("");

        row.innerHTML = `
          <div class="left">
            <div class="rank">${i+1}.</div>
            <img class="skin" alt="${p.name}" src="https://nmsr.jgj52.hu/bust/${encodeURIComponent(p.name)}?w=74">
            <div>
              <div class="name">${p.name}</div>
              <div class="tiers">${pills}</div>
            </div>
          </div>
          <div class="points">${p.points} pont</div>
        `;

        board.appendChild(row);
      });
    }

    render();
  </script>
</body>
</html>
